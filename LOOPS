⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻ Connection closed ⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 8
size server inside run loop: 3
⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻ New client connection ⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻
fd new client: 6

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 9
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 0 | _doneParsing: 0
⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻ Start parsing ⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻ fd: 6
STORED HEADER:
POST /cgi/python_cgi_POST_upload.py HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:109.0) Gecko/20100101 Firefox/112.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate, br
Content-Type: multipart/form-data; boundary=---------------------------2226804234645208589196233410
Content-Length: 114600
Origin: http://localhost:8080
Connection: keep-alive
Referer: http://localhost:8080/cgi_index.html
Cookie: Clion-ba3285b7=da5710f2-90f6-49ad-9d9b-319f22e25cda
Upgrade-Insecure-Requests: 1
Sec-Fetch-Dest: document
Sec-Fetch-Mode: navigate
Sec-Fetch-Site: same-origin
Sec-Fetch-User: ?1
REQUEST METHOD: POST

__________________ _specificServer: 127.0.0.1

originalUrlPath:               [/cgi/python_cgi_POST_upload.py]
server block root directory:   [./resources]

Starting checkIfPathCanBeServed() and searching for the correct location block on the config file:

⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻
locationBlockUriName:            [/subfolder]
locationBlockRootDir:            [./resources/location_random_dir]
The url path [/cgi/python_cgi_POST_upload.py] did not match the current location block [/subfolder] from the config file. Checking the next locationBlockUriName
⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻
locationBlockUriName:            [.py]
locationBlockRootDir:            [./resources/cgi]
File extension: .py
Path is a script file. Deleting file name from it so the extension can be matched against the location block uri extension name. Extension: .py
There is POST Form data
cgi location block for [/cgi/python_cgi_POST_upload.py] exists on config file as [.py]
Its root_directory [./resources/cgi] and configuration will be used
Method from the request: POST
Method allowed from the config file: GET POST DELETE

Location accepts the POST method, continuing...
⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻ ⎻

Start storeURLPathParts(). URLPath_full: [./resources/cgi/python_cgi_POST_upload.py]

URL Path:        [/cgi/python_cgi_POST_upload.py]
Full URI Path:   [./resources/cgi/python_cgi_POST_upload.py]
Path first part: [./resources/cgi/]
Path LAST part:  [python_cgi_POST_upload.py]
File extension:  [.py]
Form Data:    (not present)

Start CheckIfPathExists(), URLPath_full [./resources/cgi/python_cgi_POST_upload.py]
Path ./resources/cgi/python_cgi_POST_upload.py exists

HTTP status after checkIfPathCanBeServed(): 200
Found header ending /r/n, maybe there is body
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 10
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 11
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 12
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 13
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 14
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 15
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 16
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 17
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 18
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 19
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 20
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 21
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 22
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 23
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 24
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 25
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 26
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 27
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 28
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 29
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 30
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 31
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 32
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 33
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 34
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 35
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 36
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
HTTP STATUS: 200
CGI STATUS: 1

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 37
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
Start appendToRequest(): _hasBody: 1 | _doneParsing: 0
OK: Done parsing.
HTTP STATUS: 200
CGI STATUS: 1
          ReadRequest: C) Done receiving the request, start CGI
Start ChooseMethodStartCGI()
Start callCGI, cgi path: ./resources/cgi/python_cgi_POST_upload.py
UPLOAD DIR full path: /Users/jfreitas/42/rank05/webserv/resources/uploads
STORED ENV:
    1 REQUEST_METHOD=POST
    2 CONTENT_TYPE=multipart/form-data; boundary=---------------------------2226804234645208589196233410
    3 CONTENT_LENGTH=114600
    4 QUERY_STRING=
    5 SERVER_NAME=127.0.0.1
    6 COMSPEC=
    7 INFO_PATH=
    8 UPLOAD_DIR=/Users/jfreitas/42/rank05/webserv/resources/uploads
Created pipes:  in[0]7,  in[1]8, out[0]9, out[1]10

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 38
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- WRITE
⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻ This event FD belongs to CGI ⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 39
Start CHILD execve()
Interpreter Path: /usr/local/bin/python3
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- WRITE
⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻ This event FD belongs to CGI ⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻
⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻ CGI Response sent ⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 40
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 41
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- READ
EOF from ReadRequest, close the reading FD: 9
EOF READ pipe 200

----------------------------------------------------------------------------------------------------------------- WHILE LOOP 42
size server inside run loop: 3
----------------------------------------------------------------------------------------------------------------- WRITE
⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻ This event FD belongs to CLIENT ⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻⎻
Start createResponse
fd: 6
Start setResponseStatus()
_responsePath: [[./resources/cgi/python_cgi_POST_upload.py]]
_responsePath after SetResponseStatus(): ./resources/cgi/python_cgi_POST_upload.py
   getURLPath:   [/cgi/python_cgi_POST_upload.py]
  getFullPath:   [./resources/cgi/python_cgi_POST_upload.py]
getHttpStatus(): [200]
response path:   [./resources/cgi/python_cgi_POST_upload.py]
content type:    [text/html]
The path contain query -> cgi: [./resources/cgi/python_cgi_POST_upload.py]
Setting _responseBody
-------------
_responseHeader:
HTTP/1.1 200 OK
Content-Type: text/html
Content-Encoding: identity
Connection: close
Content-Length: 843
...